<div class="bg-light w-100 h-100 p-5 border border">
    <button *ngIf="isLoggedInFunction()" class="btn btn-dark btn-sm" (click)="addNewEducation()">
        Add new project
    </button>
    <div class="accordion">
        <div *ngFor="let education of educations; let i = index" class="accordion-item">
            <h2 class="accordion-header d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center flex-grow-1">
                    <button class="accordion-button flex-grow-1" type="button" data-bs-toggle="collapse"
                        [attr.data-bs-target]="'#panelsStayOpen-collapse' + i" aria-expanded="true"
                        [attr.aria-controls]="'panelsStayOpen-collapse' + i">
                        {{ education.institutionName }} - {{ education.degree }}
                        ({{ education.startDate | date:'dd-MM-yyyy' }} - {{ education.endDate | date:'dd-MM-yyyy' }})
                    </button>
                </div>

                <div class="d-flex align-items-center ms-2">
                    <button *ngIf="isLoggedInFunction()" class="btn btn-dark btn-sm me-2" type="button"
                        (click)="toggleEdit(i, education)">
                        {{ isEditing(i) ? 'Save' : 'Edit' }}
                    </button>

                    <button *ngIf="isLoggedInFunction() && isEditing(i)" class="btn btn-secondary btn-sm me-2"
                        type="button" (click)="cancelEdit()">
                        Cancel
                    </button>

                    <button *ngIf="isLoggedInFunction() && !isEditing(i)" class="btn btn-danger btn-sm" type="button"
                        (click)="delete(i, education)">
                        x
                    </button>
                </div>
            </h2>

            <div [attr.id]="'panelsStayOpen-collapse' + i" class="accordion-collapse collapse show">
                <ng-container *ngIf="!isEditing(i); else editTpl">
                    <div class="p-3">
                        <p style="white-space: pre-line;">{{education.description}}</p>
                        <h6>Field of study:</h6>
                        <p>{{education.fieldOfStudy}}</p>
                    </div>
                </ng-container>
                <ng-template #editTpl>
                    <div class="mb-2">
                        <label class="form-label">Institution Name: </label>
                        <input class="form-control" [(ngModel)]="editBuffer.institutionName"
                            [ngModelOptions]="{standalone:true}">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Degree: </label>
                        <input class="form-control" [(ngModel)]="editBuffer.degree"
                            [ngModelOptions]="{standalone:true}">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Start date:</label>
                        <input type="date" class="form-control" [(ngModel)]="editBuffer.startDate"
                            [ngModelOptions]="{standalone:true}">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">End date:</label>
                        <input type="date" class="form-control" [(ngModel)]="editBuffer.endDate"
                            [ngModelOptions]="{standalone:true}">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" rows="6" [(ngModel)]="editBuffer.description"
                            [ngModelOptions]="{standalone:true}"></textarea>
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Field of study: </label>
                        <input class="form-control" [(ngModel)]="editBuffer.fieldOfStudy"
                            [ngModelOptions]="{standalone:true}">
                    </div>
                </ng-template>
            </div>
        </div>
    </div>
</div>