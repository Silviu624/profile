<div class="bg-light w-100 h-100 p-5 border">
    <!-- Header bar -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="d-flex gap-3 align-items-center">
            <div class="card" style="width: 10rem;">
                <img src="profile.png" class="card-img-top" alt="Profile photo" />
            </div>

            <!-- Name / Title -->
            <ng-container *ngIf="!editMode; else editHeader">
                <div>
                    <h2 class="mb-1">{{ person.name }}</h2>
                    <p class="p-class mb-0">{{ person.title }}</p>
                </div>
            </ng-container>
            <ng-template #editHeader>
                <div class="w-100">
                    <input class="form-control mb-2" [(ngModel)]="person.name" [ngModelOptions]="{standalone:true}">
                    <input class="form-control" [(ngModel)]="person.title" [ngModelOptions]="{standalone:true}">
                </div>
            </ng-template>
        </div>

        <!-- Edit / Save -->
        <button *ngIf="isLoggedInFunction()" class="btn btn-dark" (click)="editMode ? save() : (editMode = true)">
            {{ editMode ? 'Save' : 'Edit' }}
        </button>
    </div>

    <hr class="my-4" />

    <div class="row g-3">
        <!-- Contact -->
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Contact</h5>

                    <!-- VIEW -->
                    <ng-container *ngIf="!editMode; else editContact">
                        <p class="card-text mb-2">
                            <strong>Date of birth:</strong>
                            {{ person.dateOfBirth | date:'yyyy-MM-dd' }}
                        </p>
                        <p class="card-text mb-2"><strong>Email:</strong> {{ person.email }}</p>
                        <p class="card-text mb-2"><strong>Phone:</strong> {{ person.phoneNumber }}</p>
                        <p class="card-text mb-2"><strong>Address:</strong> {{ person.address }}</p>

                        <p class="card-text mb-2">
                            <strong>Socials:</strong>
                            <a [href]="person.instagram" target="_blank" rel="noopener" class="ms-1 me-2">
                                <i class="bi bi-instagram"></i>
                            </a>
                            <a [href]="person.linkedIn" target="_blank" rel="noopener">
                                <i class="bi bi-linkedin"></i>
                            </a>
                        </p>

                        <p class="card-text mb-0"><strong>Nationality:</strong> {{ person.nationality }}</p>
                    </ng-container>

                    <!-- EDIT -->
                    <ng-template #editContact>
                        <div class="mb-2">
                            <label class="form-label">Date of birth</label>
                            <input type="date" class="form-control" [(ngModel)]="person.dateOfBirth"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Email</label>
                            <input class="form-control" [(ngModel)]="person.email" [ngModelOptions]="{standalone:true}">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Phone</label>
                            <input class="form-control" [(ngModel)]="person.phoneNumber"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Address</label>
                            <input class="form-control" [(ngModel)]="person.address"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">LinkedIn</label>
                            <input class="form-control" [(ngModel)]="person.linkedIn"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Instagram</label>
                            <input class="form-control" [(ngModel)]="person.instagram"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                        <div>
                            <label class="form-label">Nationality</label>
                            <input class="form-control" [(ngModel)]="person.nationality"
                                [ngModelOptions]="{standalone:true}">
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>

        <!-- About -->
        <div class="col-md-9">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">About</h5>

                    <ng-container *ngIf="!editMode; else editAbout">
                        <p class="card-text" style="white-space: pre-line;">{{ person.about }}</p>
                    </ng-container>

                    <ng-template #editAbout>
                        <textarea class="form-control" rows="6" [(ngModel)]="person.about"
                            [ngModelOptions]="{standalone:true}"></textarea>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
</div>